<html>
<head>
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<script src="js/jquery.js"></script>
	<script src="js/underscore.js"></script>
	<script src="js/handlebars.js"></script>
	<script src="js/tmdb.js"></script>
	<script src="js/api.js"></script>
	<script src="js/helpers.js"></script>

	<script id="result-copy" type="text/x-handlebars-template">
			<div class="rowThing copy" data-index="{{index}}" data-title_id="{{title_id}}">
				<div class="cell">{{total}}.</div>
				<div class="cell"><input type="text" value="{{format}}" class="formatEditor copyTool"/ placeholder="format"></div>
				<div class="cell"><input type="text" value="{{edition}}" class="editionEditor copyTool" placeholder="edition notes (optional)"/></div>
				<div class="tools cell">
	 				<button class="updateCopy tool" data-action="updateCopy" data-index="{{index}}">update copy</button>
	 			</div>
				<div class="tools cell">
	 				<button class="tool removeCopy" data-action="removeCopy" data-index="{{index}}">delete copy</button>
	 			</div>
	 		</div>
	</script>
	<script id="result-copies" type="text/x-handlebars-template">
		<h4>Copies:</h4>
		<div class="copies">
			{{#each copies}}
			<div class="rowThing copy" data-index="{{index}}" data-title_id="{{title_id}}">
				<div class="cell">{{humanIndex @index}}.</div>
				<div class="cell"><input type="text" value="{{format}}" class="formatEditor copyTool"/ placeholder="format"></div>
				<div class="cell"><input type="text" value="{{edition}}" class="editionEditor copyTool" placeholder="edition notes (optional)"/></div>
				<div class="tools cell">
	 				<button class="updateCopy tool" data-action="updateCopy" data-index="{{index}}">update copy</button>
	 			</div>
				<div class="tools cell">
	 				<button class="tool removeCopy" data-action="removeCopy" data-index="{{index}}">delete copy</button>
	 			</div>
	 		</div>
			{{/each}}
		</div>
		<div class="rowThing newCopyRow">
			<div class="cell">+</div>
			<div class="cell">
				<input type="text" class="newCopy formatType" placeholder="format type (required)"/>
			</div>
			<div class="cell">
				<input type="text" value="{{edition}}" class="newCopy editionEditor" placeholder="edition notes (optional)"/></div>
			<div class="tools cell">
 				<button class="newCopy tool" data-action="newCopy" data-index="{{index}}">new copy</button>
 			</div>
 		</div>

	</script>
	<script id="result-titles" type="text/x-handlebars-template">
		{{#each titles}}

	 		<div data-index="{{index}}" data-tmdb="{{tmdb_id}}" class="row {{dataQuality imdb_id year}}">

	 			<div class="cell activator">

	 			</div>


		    <div class="year cell">
		    	{{#equalTo year 0}}
					<p class="content">????</p>
		    	{{else}}
		    	<p class="content">{{year}}</p>
		    	{{/equalTo}}
	  		</div>
	  		<div class="title cell">
		    	<p class="content">{{title}}</p>
	  		</div>
	  		<div class="tmdb cell">
		    	<a href="https://www.themoviedb.org/movie/{{tmdb_id}}" target="_blank">{{tmdb_id}}</a>
	  		</div>
	  		<div class="imdb cell">
		    	<a href="http://www.imdb.com/title/{{imdb_id}}/" target="_blank">{{imdb_id}}</a>
	  		</div>


		    <div class="tools cell">
	 				<button class="killit tool" data-action="remove" data-index="{{index}}">remove</button>
	 			</div>

	 			<div class="extendedResults" data-title_id="{{index}}"></div>

			</div>

		{{/each}}
	</script>
	<script src="js/app3.js"></script>

	<link rel="stylesheet" href="css/style.css">

	<style>


	</style>

</head>
<body>
<h1>Titles (<span id="count">...</span>)</h1>
<p> sort by: <a href="#" class="sorter" data-sortby="entered">entered</a> <a href="#" class="sorter" data-sortby="year">year</a> <a href="#" class="sorter" data-sortby="title">title</a> show only: <a href="#" class="filter" data-filterby="missing">missing data</a> <a href="#" class="filter" data-filterby="duplicates">duplicates</a> <a href="#" class="filter" data-filterby="zero">zero quantity</a>
<br/><br/>
</p>
<div id="titles"></div>

<div>
todo:

wire up remove, with alert
make quantity modifier better
</div>
</body>