<html>
<head>
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<script src="js/jquery.js"></script>
	<script src="js/underscore.js"></script>
	<script src="js/handlebars.js"></script>
	<script src="js/tmdb.js"></script>
	<script src="js/api.js"></script>
	<script src="js/helpers.js"></script>

	<script id="result-omdb" type="text/x-handlebars-template">
	  <tr class="entry">
	  		<td><button>dvd</button></td>
		    <td>{{Title}}</td>
		    <td>{{Released}}</td>
		    <td class="overview"><p>{{Plot}}</p></div>
		  </tr>
	</script>

	<script id="result-copies" type="text/x-handlebars-template">
		{{#each copies}}
			<div class="rowThing copy" data-index="{{index}}" data-title_id="{{title_id}}">
				<div class="cell">{{humanIndex @index}}.</div>
				<div class="cell"><input type="text" value="{{format}}" class="formatEditor copyTool"/ placeholder="format"></div>
				<div class="cell"><input type="text" value="{{edition}}" class="editionEditor copyTool" placeholder="edition notes (optional)"/></div>
				<div class="tools cell">
	 				<button class="updateCopy tool" data-action="updateCopy" data-index="{{index}}">update copy</button>
	 			</div>
				<div class="tools cell">
	 				<button class="tool removeCopy" data-action="removeCopy" data-index="{{index}}">delete copy</button>
	 			</div>
	 		</div>
		{{/each}}
	</script>

	<script id="result-tmdb" type="text/x-handlebars-template">
		{{#each results}}
			<div class="row result" id="tmdbid_{{id}}" data-resultRow="{{@index}}">
				<div class="cell indicators">
					<span class="dvd">dvd</span>|<span class="blu">blu</span>
				</div>
				<div class="activator cell">
					<input type="text" id="result_{{@index}}" class="activated" data-result="{{@index}}" />
				</div>
				<div class="year cell"><p>{{year}}</p></div>
		    <div class="title cell"><p>{{title}}</p></div>
		    <div class="overview cell"><p>{{overview}}</p></div>
		    <div class="tmdbid cell" style="display:none">{{id}}</div>
		    <div class="copiesWrapper"></div>
		  </div>
		{{/each}}
	</script>

<script id="result-tmdb-ext" type="text/x-handlebars-template">
	    {{#if poster_path}}
	    	<td class="img"><img src="https://image.tmdb.org/t/p/w150{{poster_path}}" /></td>
	    {{else}}
	    	<td class="img">_nf_</td>
	    {{/if}}
	    <td>{{imdb_id}}</td>
</script>

<script id="result-tmdb-next" type="text/x-handlebars-template">
	{{#greaterThan page 1}}
		<button id="prev" class="nexty" data-page="{{page}}">prev page</button>
	{{/greaterThan}}
	{{#greaterThan total_pages page}}
		<button id="next" class="nexty" data-page="{{page}}">next page</button>
		<span class="nexty">page {{page}} of {{total_pages}}</span>
	{{/greaterThan}}
</script>

	<script src="js/app.js"></script>

	<style>
		#next {
			margin-right: 10px;
		}
		.img img {
			height: 30px;
		}
			* {
				font-family: monospace;
				font-size: 14px;
			}
		p {
			margin: 0;
		}
		.title p,.overview p {
			overflow: hidden;
		}
			th {
				text-align: left;
			}

			td p {
				max-width: 26em;
				font-size: 14px;
				height: 16px;
			}

			.counter {
				width: 104px;
			}
			.year {
				width: 40px;
			}
			.count {
				display: inline-block;
				padding: 0 5px;
				border-right: 1px solid black;
				margin-right: 5px;
			}
			.count:last-of-type {
				border-right: none;
				margin-right: 0;
			}

			.count {
				position: relative;
				background-color: white;
				transition: all .2s linear;
			}
			.dvd,.blu {
				transition: all .2s linear;
			}
			.plusOne {
				background-color: green;
			}
			.count.clearedOut {
				background-color: red;
			}

			.activated {
				content: "blah";
				display: inline-block;
				background: white;
				border: 1px solid #ddd;
				color: white;
				height: 15px;
				width: 15px;
				outline: none;
				padding: 0;
			}
			.activated:focus {
				background: purple;
			}
			td.overview {
				width: 50%;
				font-size: 12px;
			}
			.overview p {
				max-width: 100%;
			}
			#results {
				width: 100%;
			}
			.activatedRightNow {
				background-color: #f2f2f2;
			}
			.owned {
				color: #999;
			}
			.cantFindItHelper {
				display: none;

			}
			input.cantFindItHelper {
				width: 100px;
			}
			.cantFindItHelper.autoWidth {
				width: auto;
			}

	</style>

	<link rel="stylesheet" href="css/style.css">

</head>
<body>

<div id="helpToggle"><a href="#">help?</a><br/><br/></div>
<div id="helpme" style="display:none;">1. Search, results will begin to show up while typing.<br/>2. Press up/down keys to highlight a row.<br/>While a row is highlighted...<br/>3. Press left to create a dvd copy, press right for blu ray record.<br/>
4. The title and the copy will be logged to the db as soon as you can see the copy record.<br/>5. If you want to add notes about the edition go ahead ad do that when the copy record pops up.<br/><br/>Grey text has already been added to inventory.<br/><br/>If the search doesn't give the correct results...<br/> Press the "Can't find it button", fill in as much info as you can, and the click "Save for Later"<br/><br/></div>

<h3>Searchmode</h3>
<input type="radio" name="searchType" value="tv"/>tv
<input type="radio" name="searchType" value="movies" checked/>movies
<input type="radio" name="searchType" value="movies"/>upc
<br/>
<br/>
<div id="searchform">
<input type="text" id="searchbox" placeholder="title"/>
<input type="text" id="yearbox" placeholder="year" class="cantFindItHelper"/>
<input type="text" id="director" placeholder="director" class="cantFindItHelper"/>
<input type="text" id="upc" placeholder="upc" class="cantFindItHelper"/>
<input type="text" id="notes" placeholder="notes..." class="cantFindItHelper"/>
<input type="text" id="dvd" placeholder="dvds" class="cantFindItHelper"/>
<input type="text" id="blu" placeholder="blu" class="cantFindItHelper"/>
<input type="checkbox" id="tv" class="cantFindItHelper autoWidth"/>
<span class="cantFindItHelper autoWidth">TV?</span>
<button id="cantFindIt" class="cantFindItHint">Can't Find It?</button>
<button id="findItLater" class="cantFindItHelper">Save For Later</button>
</div>

<div id="loading" style="display:none">loading...</div>


<div id="results" style="display:none">
	<div class="row">
		<div class="col1 cell">&nbsp;</div>
		<div class="col2 cell">&nbsp;</div>
		<div class="col3 cell">Year</div>
		<div class="col4 cell">Title</div>
		<div class="col5 cell">plot</div>
	</tr>
</div>
<div id="nav"></div>
<table id="omdb" class="resultSet">
</table>
<table id="tmdb" class="resultSet">
</table>

</body>